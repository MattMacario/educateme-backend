<!DOCTYPE html>
<html lang="en">
<head>

	<style>
		.topnav {
			overflow: hidden;
			background-color: #333;
		}
		.topnav a {
			float: left;
			color: #f2f2f2;
			text-align: center;
			padding: 14px 16px;
			text-decoration: none;
			font-size: 17px;
		}

		.topnav a:hover {
			background-color: #ddd;
			color: black;
		}

		.topnav a.active {
			background-color: #04AA6D;
			color: white;
		}
	</style>

</head>
<body style="background-color: #E3E3E3">


<p><div class="topnav">
	<a class="active" href="/">Home</a>



</div> </p>
<br>
<br>

	<p>Student login</p>
<form id="student-form">
  <input type="text" name="username" placeholder="username" required /><br />
  <input type="password" name="password" placeholder="password" required /><br />
  <input type="submit" value="Login" />
  <p id="error" class="error"></p>
</form>
	<div id="message"></div>

<script>
  const form = document.querySelector('#student-form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    const url = 'https://tc7vs3yb2surb2h25hefxe7erq0bstyi.lambda-url.us-west-1.on.aws/login-student?' + new URLSearchParams(data).toString();
    const response = await fetch(url);
    const result = await response.json();
    console.log(result);
    if (result.status == "error") {
      message.textContent = 'Username or password incorrect.';
    } if(result.status=="success") {
      window.location = '/studentHome';
    }
  });
</script>




</body>
</html>